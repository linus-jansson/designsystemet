import { Meta, Canvas, Controls, Primary } from '@storybook/blocks';
import { Do, Dont, Stack } from '@doc-components';

import * as TableStories from '../../Table/Table.stories';

import * as CheckboxStories from './Checkbox.stories';
import * as CheckboxGroupStories from './CheckboxGroup.stories';

<Meta of={CheckboxStories} />

# Checkbox

Vi använder `Checkbox` (kryssruta) för att ge användarna val där de kan välja ett eller flera alternativ. Användarna kan både välja och avmarkera de val de gör. Använd [`Checkbox.Group`](#checkboxgroup) för att gruppera flera val.

<Primary />
<Controls />

## Så använder du checkbox

```tsx
import { Checkbox } from '@digdir/designsystemet-react';

<Checkbox.Group legend='Vad vill din D&D-grupp äta?'>
  <Checkbox value='elfsalad'>Alvskogens sallad</Checkbox>
  <Checkbox value='firecakes'>Eldandade riskakor</Checkbox>
  <Checkbox value='dumplings'>Kyckling-dumplings</Checkbox>
  <Checkbox value='ribs'>Sembianska honungsglaserade rothè-revben</Checkbox>
</Checkbox.Group>;
```

## Exempel

<br />

### Endast ett val

Om användaren ska bekräfta något men inte välja något kan en `checkbox` stå ensam. Till exempel när användaren ska samtycka till villkor.

<Canvas of={CheckboxGroupStories.OneOption} />

### Obestämd

Använd `indeterminate` för att signalera att en eller flera kryssrutor är markerade i gruppen.

<Canvas of={TableStories.WithFormElements} />

### Checkbox.Group

Använd `Checkbox.Group` för att gruppera flera val.

<Canvas of={CheckboxGroupStories.Preview} />
<Controls of={CheckboxGroupStories.Preview} />

#### Felmeddelande

Använd `error` på `Checkbox.Group` för att visa ett felmeddelande.

Här måste du använda `Checkbox.Group` för att göra innehållet tillgängligt och aktivera rätt stil.

<Canvas of={CheckboxGroupStories.WithError} />

#### Kontrollerad

Använd `value` på `Checkbox.Group` för att själv kontrollera värdena.

<Canvas of={CheckboxGroupStories.Controlled} />

#### Readonly

Fält med attributet `readonly` ingår i tabbsekvensen. Användarna kan kopiera innehållet men inte redigera det. Informationen följer med när formuläret skickas in.

`Readonly`-fält kan vara förvirrande för vissa användare. Alla förstår inte varför de inte kan ändra innehållet i fältet. Vi rekommenderar därför att undvika readonly så långt det går.

<Canvas of={CheckboxGroupStories.ReadOnly} />

#### Disabled

Undvik inaktiverade tillstånd om du kan. De har låg färgkontrast som är problematisk för vissa användare. `Disabled` kan inte uppfylla kontrastkraven, vilket kan få användaren att tro att elementet är aktivt, försöka klicka på det och inte förstå varför det inte fungerar.

<Canvas of={CheckboxGroupStories.Disabled} />

<br />

## Riktlinjer för checkbox

Om det finns fler än 7 svarsalternativ, använd istället [`Select`](/docs/komponenter-select--docs) eller [`Combobox`](/docs/komponenter-combobox--docs).

### Sortering

Alternativen ska som regel sorteras alfabetiskt. Om du väljer att presentera de mest relevanta alternativen först kan det bli svårt att hitta det önskade alternativet. Du riskerar också att påverka svaret, vilket inte är önskvärt.

### Placering

`Checkbox` ska som regel endast placeras vertikalt, med hänsyn till läsbarheten. Det är lättare för användarna att skanna listan när alternativen ligger under varandra. För användare som behöver zooma in på sidan för att se ordentligt är en horisontell lista extra svår.

<Stack
  direction='row'
  style={{
    justifyContent: 'unset',
    alignItems: 'unset',
  }}
>
  <Do
    description='Placera kryssrutorna vertikalt, så att listan blir lättare att läsa.'
    image='/img/component-guidelines/checkbox/CheckboxGroupV.png'
  />
  <Dont
    description='Undvik att placera kryssrutorna i flera kolumner.'
    image='/img/component-guidelines/checkbox/CheckboxGroupH.png'
  />
</Stack>

<br />

## Text i checkbox

I ett formulär formuleras ofta förklaringen som en fråga. Överväg om du behöver inkludera information om att användaren kan välja flera svarsalternativ.

Använd ett aktivt och positivt språk. Tänk på innehållet som en konversation. När `legend` är en mening kan du skriva den i du-form och svarsalternativen (`label`) i jag-form.

- `legend` och eventuell `description` placeras innan listan med svarsalternativ visas.
- `label` för varje ruta måste beskriva alternativet.
- `label` ska stå till höger om rutan. Om det behövs en extra beskrivning kan du lägga en `description` under `label`.
- `label` ska alltid ha versal första bokstav.

<img
  src='/img/component-guidelines/checkbox/checkbox-anatomy.png'
  alt='Illustrationen visar vad som är legend, description och label i en grupp med kryssrutor.'
/>

### Skapa logisk sammanhang mellan förklaringen och svarsalternativen

Användaren ska kunna läsa varje svarsalternativ som en logisk respons på förklaringen ovanför rutorna.

Exempel på korrekt logisk sammanhang:

<Canvas of={CheckboxGroupStories.ContentEx1} />

### Ge svarsalternativen samma språkliga form

Det innebär att de kan ha antingen fullständiga meningar eller ett ord, men inte båda.

**Antingen:**

<Canvas of={CheckboxGroupStories.ContentEx2} />

**Eller:**

<Canvas of={CheckboxGroupStories.ContentEx3} />

<br />

## Tillgänglighet

Det ska vara möjligt att flytta fokus till `Checkbox` genom att trycka på `Tab` på tangentbordet. Det ska vara möjligt att markera och avmarkera genom att trycka på `Space`.

### Använd label

`Checkbox` ska alltid ha en `label`. Om du använder `label` från en annan plats, kom ihåg att använda `aria-label` eller `aria-labelledby` (Se koden nedan).

<Canvas of={CheckboxStories.Single} />