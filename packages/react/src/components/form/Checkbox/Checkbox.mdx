import { Meta, Canvas, Controls, Primary } from '@storybook/blocks';
import { Do, Dont, Stack, CssVariables } from '@doc-components';
import css from '@digdir/designsystemet-css/checkbox.css?inline';
import * as TableStories from '../../Table/Table.stories';
import * as CheckboxStories from './Checkbox.stories';
import * as CheckboxGroupStories from './CheckboxGroup.stories';

<Meta of={CheckboxStories} />

# Checkbox

Vi bruker `Checkbox` (avmerkingsboks) for å gi brukerne valg, der de kan velge ett eller flere alternativer. Brukerne kan både velge og oppheve valgene de gjør. Bruk [`Checkbox.Group`](#checkboxgroup) til å gruppere flere valg.

<Primary />
<Controls />

## Slik bruker du checkbox

```tsx
import { Checkbox } from '@digdir/designsystemet-react';

<Checkbox.Group legend='What would your D&D party like to eat?'>
  <Checkbox value='elfsalad'>Wood Elf forest salad</Checkbox>
  <Checkbox value='firecakes'>Fire breath rice cakes</Checkbox>
  <Checkbox value='dumplings'>Chicken-something dumplings</Checkbox>
  <Checkbox value='ribs'>Sembian honey-glazed rothè ribs</Checkbox>
</Checkbox.Group>;
```

## Eksempler

<br />

### Kun ett valg

Hvis brukeren skal bekrefte noe, men ikke velge noe, kan en `checkbox` stå alene. For eksempel når brukeren skal samtykke til vilkår.

<Canvas of={CheckboxGroupStories.OneOption} />

### Ubestemt

Bruk `indeterminate` til å signalisere at en eller flere sjekkbokser er markert i gruppen.

<Canvas of={TableStories.WithFormElements} />

### Checkbox.Group

Bruk `Checkbox.Group` for gruppering av flere valg.

<Canvas of={CheckboxGroupStories.Preview} />
<Controls of={CheckboxGroupStories.Preview} />

#### Feilmelding

Bruk `error` på `Checkbox.Group` for å vise feilmelding.

Her må du bruke `Checkbox.Group` for å gjøre innholdet tilgjengelig og aktivere riktig stil.

<Canvas of={CheckboxGroupStories.WithError} />

#### Kontrollert

Bruk `value` på `Checkbox.Group` for å kontrollere verdiene selv.

<Canvas of={CheckboxGroupStories.Controlled} />

#### Readonly

Felter med `readonly`-attributtet er med i tabrekkefølgen. Brukerne kan kopiere innholdet men ikke redigere det. Informasjon blir med når skjemaet sendes inn.

`Readonly`-felter kan være forvirrende for noen brukere. Ikke alle vil skjønne hvorfor de ikke får til å endre innholdet i feltet. Vi anbefaler derfor å unngå readonly så langt det lar seg gjøre.

<Canvas of={CheckboxGroupStories.ReadOnly} />

#### Disabled

Unngå deaktiverte tilstander om du kan. De har lav fargekontrast som er problematisk for noen brukere. `Disabled` kan ikke møte kontrastkravene, for da kan brukeren tro at elementet er aktivt, prøve å trykke på det, og ikke skjønne hvorfor det ikke går.

<Canvas of={CheckboxGroupStories.Disabled} />

<br />

## Retningslinjer for checkbox

Hvis det er flere enn 7 svaralternativer, bruk [`Select`](/docs/komponenter-select--docs) eller [`Combobox`](/docs/komponenter-combobox--docs) istedenfor.

### Sortering

Alternativene skal som hovedregel sorteres alfabetisk. Velger du å
presentere de mest aktuelle alternativene først kan det bli vanskelig å finne ønsket
alternativ. Du kan også risikere å påvirke svaret, noe som er uheldig.

### Plassering

`Checkbox` skal som hovedregel kun plasseres vertikalt, av hensyn
til lesbarhet. Det er enklere for brukere å skanne listen når alternativene ligger
under hverandre. For brukere som trenger å forstørre (zoome inn) nettsiden for å
se godt nok, er en horisontal liste ekstra vanskelig.

<Stack
  direction='row'
  style={{
    justifyContent: 'unset',
    alignItems: 'unset',
  }}
>
  <Do
    description='Plasser checkboxes vertikalt, slik at listen blir lettere å lese. '
    image='/img/component-guidelines/checkbox/CheckboxGroupV.png'
  />
  <Dont
    description='Du bør unngå å plassere checkboxes i flere kolonner.'
    image='/img/component-guidelines/checkbox/CheckboxGroupH.png'
  />
</Stack>

<br />

## Tekst i checkbox

I et skjema er ofte forklaringen formulert som et spørsmål. Vurder om du trenger å ha med informasjon om at brukeren kan velge flere svaralternativer.

Bruk et aktivt og positivt språk. Tenk på innholdet som en samtale. Når `legend`
er en setning, kan du skrive den i du-form og svaralternativene (`label`) i jeg-form.

- `legend` og eventuell `description` plasseres før listen med svaralternativ kommer.
- `label` til hver boks må beskrive alternativet.
- `label` skal stå til høyre for boksen. Hvis det er nødvendi med ekstra beskrivelse, kan du ha en `description` under `label` .
- `label` skal alltid ha stor forbokstav.

<img
  src='/img/component-guidelines/checkbox/checkbox-anatomy.png'
  alt='Illustrasjonen viser hva som er legend, description og label i en gruppe med avmerkingsbokser.'
/>

### Lag logisk sammenheng mellom forklaringen og svaralternativene

Brukeren skal kunne lese hvert svaralternativ som en logisk respons på forklaringen over boksene.

Eksempel på riktig logisk sammenheng:

<Canvas of={CheckboxGroupStories.ContentEx1} />

### Gi svaralternativene samme språklige form

Det betyr at de kan ha enten fullstendige setninger eller ett ord, ikke begge deler.

**Enten:**

<Canvas of={CheckboxGroupStories.ContentEx2} />

**Eller:**

<Canvas of={CheckboxGroupStories.ContentEx3} />

<br />

## Tilgjengelighet

Det skal være mulig å flytte fokus til `Checkbox`, ved å trykke `Tab` på tastaturet. Det skal være mulig å merke og fjerne avmerking ved å trykke `Space`.

### Bruk label

`Checkbox` skal alltid ha en `label`. Bruker du `label` fra en annen plass, husk da å bruke `aria-label` eller `aria-labelledby` (Se kode under).

<Canvas of={CheckboxStories.Single} />

## CSS Variabler

<CssVariables css={css} />
