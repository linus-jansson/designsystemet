import { Meta, Canvas, Controls, Primary, ArgTypes } from '@storybook/blocks';
import { CssVariables } from '@doc-components';
import css from '@digdir/designsystemet-css/input.css?inline';
import * as RadioStories from './Radio.stories';
import * as useRadioGroupStories from '../../../utilities/hooks/useRadioGroup/useRadioGroup.stories';

<Meta of={RadioStories} />

# Radio

`Radio` viser brukeren en liste med alternativer de kan velge mellom. Brukerne kan bytte mellom alternativene, men må velge ett. Bruk `Radio.Group` for å gruppere alternativknappene.

<Primary />
<Controls />

## Så använder du radio

```tsx
import { Radio } from '@digdir/designsystemet-react';

<Radio.Group legend='Er du over 18 år?'>
  <Radio value='Ja'>Ja</Radio>
  <Radio value='Ne'>Nei</Radio>
</Radio.Group>;
```

## Exempel

<br />

### Enkel radio

`Radio` ska alltid ha en `label`. När du använder `label` från en annan plats, kom ihåg att använda `aria-label` eller `aria-labelledby`.

<Canvas of={RadioStories.AriaLabel} />

## `Fieldset` og `useRadioGroup`

Bruk `Radio.Group` for gruppering av alternativknapper.

<Canvas of={RadioStories.Group} />

Til `useRadioGroup` kan du sende inn:

<ArgTypes of={useRadioGroupStories.UseRadioGroup} />

I respons får du objektet:

```ts
{
  getRadioProps: (value: string | RadioProps) => RadioProps, // Returnerer props du kan spre på <Radio /> eller <input type="radio" />
  validationMessageProps: ValidationMessageProps, // Props du valgfritt spre på ValidationMessage for å koble feilmelding til radio gruppen
  setValue: string, // Funksjon for å sette radio gruppens verdi
  value: string, // Nåværende verdi for radio gruppen
}
```

Eksempel på bruk:

```tsx
const { getRadioProps, validationMessageProps } = useRadioGroup({
  name: 'my-radio-group',
  value: 'sjokolade',
  error: 'Du må velge et alternativ',
});

return (
  <Fieldset>
    <Fieldset.Legend>Hvilken iskremsmak er best?</Fieldset.Legend>
    <Fieldset.Description>
      Velg din favorittsmak blant alternativene.
    </Fieldset.Description>
    <Radio label='Vanilje' {...getRadioProps('vanilje')} />
    <Radio label='Jordbær' {...getRadioProps('jordbær')} />
    <Radio label='Sjokolade' {...getRadioProps('sjokolade')} />
    <ValidationMessage {...validationMessageProps} />
  </Fieldset>
);
```

### Felmeddelande

Bruk `error` på `Radio.Group` for å vise feilmelding.

Her må vi bruke `Radio.Group`, fordi den aktiverer riktig stil og sørger for at innholdet har de riktige attributtene for tilgjengelighet.

<Canvas of={RadioStories.WithError} />

### Kontrollerad

Bruk `value` på `Radio.Group` for å kontrollere verdiene selv.

<Canvas of={RadioStories.Controlled} />

### Readonly

Fält med attributet `readonly` ingår i tabbsekvensen. Användarna kan kopiera innehållet men inte redigera det. Informationen följer med när formuläret skickas in.

`readonly`-fält kan vara förvirrande för vissa användare. Alla förstår inte varför de inte kan ändra innehållet i fältet. Vi rekommenderar därför att undvika `readonly` så långt det går.

<Canvas of={RadioStories.ReadOnly} />

### Disabled

Undvik inaktiverade tillstånd om möjligt. De har låg färgkontrast vilket är problematiskt för vissa användare. `disabled` kan inte uppfylla kontrastkraven, och användaren kan tro att elementet är aktivt, försöka klicka på det och inte förstå varför det inte fungerar.

<Canvas of={RadioStories.Disabled} />

### Inline

Bruk `inline` for å plassere alternativene på samme linje. Anbefales kun dersom du har to alternativer og korte `label`s.
Bruk `inline` for å plassere alternativene på samme linje. Anbefales kun dersom du har to alternativer og korte `labels`.

<Canvas of={RadioStories.Inline} />

## Riktlinjer

Vi använder `Radio` när vi vill ge användarna möjlighet att välja endast ett alternativ. Om de ska kunna välja flera, använd [`Checkbox`](/docs/komponenter-checkbox--docs) istället.

Vi har upp till sju alternativ i en grupp. Om vi behöver ge användarna fler än sju val, bör vi istället använda [`Combobox`](/docs/komponenter-combobox--docs)-komponenten. Om vi bara ska ge användarna ett val, kan en [`Switch`](/docs/komponenter-switch--docs) eller [`Checkbox`](/docs/komponenter-checkbox--docs) passa bättre.

### Sortering

Alternativen ska som regel sorteras alfabetiskt. Om du väljer att presentera de mest relevanta alternativen först kan det bli svårt att hitta det önskade alternativet. Du riskerar också att påverka svaret, vilket inte är önskvärt.

### Placering

`Radio` ska som regel placeras vertikalt för läsbarhetens skull. Det är enklare för användare att skanna listan när alternativen ligger under varandra. För användare som behöver förstora (zooma in) en webbsida för att se ordentligt är en horisontell lista extra svår.

Om vi bara har två val med korta `labels` kan vi visa dem bredvid varandra. I en [likert-skala](https://docs.altinn.studio/nb/app/development/ux/components/likert/) är det också naturligt att visa dem bredvid varandra. Vid horisontell visning är det viktigt att det framgår tydligt vilken text som hör till vilken ruta.

### Undvik förvalt alternativ

Tänk noga över om du verkligen behöver ha ett förvalt alternativ. Det kan ha motsatt effekt mot vad du vill, till exempel att användaren känner sig manipulerad att välja ett visst alternativ eller inte kan göra ett medvetet val själv.

<br />

## Text i komponenten

En grupp med radioknappar bör alltid ha en `legend` och eventuellt en `description` om hjälpinformation behövs.

Radioknappar ska alltid ha en `label`. Den ska vara så kort som möjligt och varje alternativ bör vara formulerat på samma sätt. Radio-komponenten kan också ha `description`. Den visas då direkt under `label`.

<img
  src='/img/component-guidelines/radio/radio-anatomy.png'
  alt='Illustrationen visar vad som är legend, description och label i en grupp med radioknappar.'
/>

<br />

## Tillgänglighet

Se till att det finns tillräckligt med utrymme runt varje radioknapp så att den är lätt att välja även på pekskärmar.

Undvik att placera radioknappar bredvid varandra. Det gör det svårare att läsa. Det skapar också problem för användare som måste zooma in på en webbsida eller app för att se ordentligt.

Notera att vi använder piltangenterna för att välja alternativ i `Radio`-komponenten, inte Tab-tangenten.

- Pil opp/venstre - går til forrige valg
- Pil ned/høyre - går til neste valg
- Mellomromstasten - går til det første alternativet i en gruppe med alternativknapper, når gruppa ikke har et forhåndsvalgt alternativ.
- Tab - går til hele gruppa med alternativer.
./Group.stories
