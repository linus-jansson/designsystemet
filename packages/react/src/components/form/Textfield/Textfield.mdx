import { Meta, Canvas, Controls, Primary } from '@storybook/blocks';
import { CssVariables } from '@doc-components';
import css from '@digdir/designsystemet-css/textfield.css?inline';
import * as TextfieldStories from './Textfield.stories';

<Meta of={TextfieldStories} />

# Textfield

Textfield er en samensatt komponent for [`input`](/docs/komponenter-input--docs) og [`textarea`](/docs/komponenter-textarea--docs). Du bytter mellom de ved å sette `multiline={true/false}`. `Textfield` har også innebygd `label`, `description`, `validationmessage`, `affix` og `counter`.
<br/>


<Primary />
<Controls />

## Slik bruker du Textfield

```tsx
import { Textfield } from '@digdir/designsystemet-react';

<Textfield label="Navn" />
```
## Eksempler

### Multiline

Du endrer til `textarea` ved å sette `multiline` til `true`. Da kan brukerne skrive lengre tekster.

<Canvas of={TextfieldStories.Rows} />

### Prefix/Suffix

Prefixer og suffixer er nyttige for å vise enheter, valuta eller annen informasjon som er relevant for feltet. Disse skal **ikke** brukes alene, da skjermlesere ikke leser dem opp. Det er viktig at samme informasjon som vises i prefixet eller suffixet, også inkluderes i ledeteksten.

<Canvas of={TextfieldStories.Affix} />

### Antall tegn

Bruk `counter` til å begrense antall tegn brukerne kan skrive i feltet.

<Canvas of={TextfieldStories.Counter} />

### Kontrollert

<Canvas of={TextfieldStories.Controlled} />


## Retningslinjer for når du skal bruke `Textfield`
`Input` er egnet til korte tekster/svar. `Textarea` er egnet til mer utfyllende og lengre svar. 

### Undvik platshållartexter

Plassholdertekster (`placeholder`) forsvinner når brukerne skriver i feltet. Det er derfor bedre å inkludere hint og viktig informasjon i selve ledeteksten eller den tilhørende beskrivelsen. Kontrastkravene i WCAG gjelder for `placeholder` også, og da blir teksten så mørk at brukerne kan oppfatte `textfield` som utfylt.

### Anpassa bredden på textfältet

Tilpass bredden etter hva brukerne skal skrive inn - kort bredde for telefonnummer og bredere for stedsnavn. Ulik bredde på feltene gjør det lettere å navigere i skjemaer med mange felter.

### Tillat kopier og lim inn

Brukere som skal fylle ut et tekstområde, trenger ofte å kopiere og lime inn informasjon, så denne funksjonen må ikke deaktiveres. Dette gjør det enkelt for brukerne å fylle inn nødvendige opplysninger uten begrensninger.

### Inmatning och formatering

- Använd `autoComplete` för fält som tar emot personlig information. Om fältet ska be om personuppgifter om någon annan än användaren, måste du stänga av `autoComplete` (WCAG 1.3.5).
- Använd gärna inmatningstyper som visar vad du ber om, till exempel telefonnummer och e-post. Sådana inmatningstyper ger mobilanvändare ett tangentbord som passar för det de ska ange, till exempel ett numeriskt tangentbord för telefonnummer, men de kan också utlösa validering på klientsidan.
- Acceptera så mycket inmatning som möjligt från användarna, så länge det är begripligt. Exempel kan vara kontonummer med punkter, telefonnummer med mellanrum eller mellanrum i slutet av en e-postadress.
- Se till att användarna kan se inmatning som formateras automatiskt, utan att det stör dem när de fyller i.
- Använd inte bara versaler eller kursiv text i etiketten. Det är svårare att läsa.

<br/>

## Tekst i komponenten

Det skal alltid være ledetekst på `textfield`. I spesielle tilfeller kan vi skjule ledeteksten ved å ikke sende inn `label`. Det kan for eksempel være i tabeller, hvis feltet får ledeteksten fra tabelloverskriften. Selv om vi har tenkt å skjule ledeteksten, må vi alltid skrive en ledetekst som gir mening, siden den leses opp av skjermlesere.

<br />
- Hold ledeteksten kort, unngå at den går over to linjer.
- Unngå å legge til beskrivelse som ikke er relevant eller meningsfull for brukeren.
- Unngå å bruke kolon etter `label`.

<br/>

## Tillgänglighet

### Använd inte inaktiverade fält

Ikke bruk deaktivert tilstand (`disabled`) på tekstfelt. Tenk heller over om du trenger å vise feltet i det hele tatt, eller om du heller kan skrive informasjonen ut i ren tekst eller bruke `readonly`.

### Prefix och suffix

Prefix och suffix är ett extra visuellt hjälpmedel som ignoreras av skärmläsare. Vi måste alltid ha en beskrivande etikett. Prefix och suffix är placerade utanför inmatningsfälten de tillhör. På så sätt undviker vi att de skapar problem i vissa webbläsare, som kan lägga till en ikon i inmatningsfältet (till exempel ikoner för att visa eller skapa lösenord).
