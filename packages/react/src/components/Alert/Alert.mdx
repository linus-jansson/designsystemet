import { Meta, Canvas, Controls, Primary } from '@storybook/blocks';
import { Do, Dont, Stack, CssVariables } from '@doc-components';
import css from '@digdir/designsystemet-css/alert.css?inline';

import * as AlertStories from './Alert.stories';

<Meta of={AlertStories} />

# Alert

Vi bruker `Alert` til å gi brukeren informasjon som det er ekstra viktig at de ser og forstår. Alert er designet for å fange brukernes oppmerksomhet. Teksten i varselet skal være kort og tydelig.

<Primary />
<Controls />

## Bruk

```tsx
import { Alert } from '@digdir/designsystemet-react';

<Alert>You are using the Alert component!</Alert>;
```

## Eksempler

`Alert` kan brukes til fire ulike budskap: Informasjon, advarsler, suksess og feilmelding. Den kan også brukes sammen med andre komponenter og stiler. Her er noen eksempler.

<br />

### Informasjon

Bruk `info` til informasjon som er nyttig for brukerne, men ikke avgjørende for at de skal forstå oppgaven.

<Canvas of={AlertStories.VariantInfo} />

### Suksess

Bruk `success` når du vil bekrefte at brukeren har fullført en oppgave, at handlingen var vellykket.

<Canvas of={AlertStories.VariantSuccess} />

### Advarsel

Bruk `warning` når du vil at brukeren skal foreta en bestemt handling eller for å advare dem om noe viktig.

<Canvas of={AlertStories.VariantWarning} />

### Feilmelding

Bruk `danger` for å informere om noe som er kritisk eller som hindrer brukeren i å komme videre.

<Canvas of={AlertStories.VariantDanger} />

### Med og uten overskrift

Hvis meldingen er lenger enn en setning kan det være nyttig å bruke en overskrift til å fremheve det viktigste. Dette kan gjøres ved bruk av [Typografi](/docs/komponenter-typography--docs)-komponentene. Husk å velge riktig overskriftsnivå ut fra plassen alert har i innholdsstrukturen på siden.

<Canvas of={AlertStories.MedHeading} />

Dersom tittel og beskrivelse gjentar det samme er det bedre å bruke en enkel setning uten overskrift.

<Canvas of={AlertStories.MedKunHeading} />

### Med lenke

Du kan ha en lenke i Alert hvis det hjelper brukeren med å løse oppgaven. Men vær obs på at en lenke tar brukeren ut av tjenesten, så bruk lenke kun når det er absolutt nødvendig, for eksempel hvis du vil at brukeren skal åpne et skjema eller utføre en viktig oppgave.

<Canvas of={AlertStories.MedLenke} />

## Retningslinjer for alert

Alert har flere varianter, som brukes til fire ulike budskap: Informasjon, advarsler, suksess og feilmelding. Bruk komponenten varsomt. Brukere kan forveksle varsler med reklame, og dermed overse dem. Hvis vi bruker varsler for ofte, kan vi forverre dette problemet.

Pass på at alert har samme utseende og formspråk i alle tjenester og produkter. Denne komponenten skal være mulig å kjenne igjen over alt, så vi skal ikke justere den

Passer til å

- gi korte og informative varsler

Passer ikke til å

- gi varsler om systemfeil eller lignende
- validere enkelte skjemaelement, bruk heller komponentens egen feilmelding

### Størrelser

Når du setter `size`, endrer vi ikke størrelsen på tekst som ligger i tekstkomponenter. Fritekst som blir sendt inn vil endre størrelse i henhold til `size`-propen.

Dersom du sender inn tekst ved bruk av komponenter kan du følge tabellen under for anbefalt størrelser:

| Alert Størrelse | Heading størrelse | Paragraph størrelse |
| --------------- | ----------------- | ------------------- |
| sm              | 2xs               | sm                  |
| md              | xs                | md                  |
| lg              | sm                | lg                  |

### Ikke lag andre versjoner

Det er viktig at Alerts har samme utseende og formspråk på tvers av produktene, så den skal ikke justeres.

<Stack direction="row" style={{
  justifyContent: 'unset',
  alignItems: 'unset'
}}>
  <Do
    description='Alert brukes på tvers av produkter og skal se like ut'
    image='/img/component-guidelines/alert/alert-ex1-do.png'
  />

  <Dont
    description='Ikke fjern border, bytt ikon, eller gjør andre visuelle endringer på alert'
    image='/img/component-guidelines/alert/alert-ex1-dont.png'
  />
</Stack>
<br />

## Tekst i komponenten

Det er ikke alltid lett å forstå forskjellen på varslene, selv om de har ulike ikoner og farger. Derfor er det viktig at teksten vi skriver i varselet er tydelig og lett å forstå.

Vi kan velge om vi vil ha med en overskrift i alert. Hvis meldingen er lengre enn en setning, kan det være lurt å ha med en overskrift som fremhever det viktigste.

Det må være tydelig hvem som gjør hva. Tenk på teksten som en samtale med brukeren, bruk ord som «vi» og «du».

Hvis meldingen er knyttet til en bestemt handling, for eksempel svar på et spørsmål, bør teksten gjenta nøkkelord fra ledeteksten.

Det er spesielt viktig at teksten i varsler forteller om det er noe brukene må eller kan gjøre for å komme videre med oppgaven sin.

Her er en liste med hvilken type informasjon en varsel bør inneholde:

- Fortell hva som har skjedd
  - Eksempel: "Kunne ikke koble til konto."
- Fortell hvorfor det skjedde
  - Eksempel: "Vi kunne ikke koble til kontoen din på grunn av tekniske problemer fra vår side."
- Forsikre brukeren
  - Eksempel: "Endringene dine har blitt lagret."
- Gi dem en vei ut av problemet
  - Eksempel: "Hvis dette problemet oppstår igjen, kontakt Kundeservice."
- Hjelp dem å fikse problemet selv
  - Eksempel: "Vennligst prøv igjen."
    <br />
    <br />

## Tilgjengelighet

### Alternativtekst

Ikonene er ikke bare dekorative. De har en standard alternativtekst som kommuniserer alvorlighetsgrad: "Informasjon", "Suksess", "Advarsel" og "Feil". Denne blir lest opp som en del av innholdet for skjermleserbrukere.

### Interaksjon med skjermleser

Alert-komponenten kommer ikke med en `role="alert"` som default, den blir presentert for skjermleserbrukere som vanlig statisk innhold. Du kan legge på `role=alert` selv, men vær opperksom på forventet oppførsel dette medfører. Du kan lese mer om dette på [dokumentasjonen til ARIA](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/alert_role).

#### Ikke gjør dette

Ikke bruk `role=alert` om `Alert` er synlig når siden lastes inn.

<Canvas of={AlertStories.UtenAria} />

#### Gjør dette

Bruk `role=alert` hvis den dukker opp dynamisk underveis pga. brukerinput eller andre faktorer som kan utløse en alert.

<Canvas of={AlertStories.MedAria} />

## CSS Variabler

<CssVariables css={css} />
