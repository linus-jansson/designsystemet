import { Meta, Canvas, Controls, Primary, ArgTypes } from '@storybook/blocks';

import * as DropdownStories from './Dropdown.stories';

import { Dropdown } from './';

<Meta of={DropdownStories} />

# Dropdown

<Primary />
<Controls />

## Så använder du `Dropdown`

```tsx
import { Dropdown } from '@digdir/designsystemet-react';

// med context
<Dropdown.Context>
  <Dropdown.Trigger>Trigger</Dropdown.Trigger>
  <Dropdown>
    <Dropdown.Heading>Rubrik</Dropdown.Heading>
    <Dropdown.List>
      <Dropdown.Item>Objekt</Dropdown.Item>
    </Dropdown.List>
  </Dropdown>
</Dropdown.Context>

// utan context
<Button popovertarget="my-dropdown">Trigger</Button>
<Dropdown id="my-dropdown">
  <Dropdown.Heading>Rubrik</Dropdown.Heading>
  <Dropdown.List>
    <Dropdown.Item>Objekt</Dropdown.Item>
  </Dropdown.List>
</Dropdown>
```

## Exempel på användning

### Kontrollerad

Om du skickar in `open`, använder du `Dropdown` kontrollerat. Du kan använda `onClose` för att få information när `Dropdown` stängs.

<Canvas of={DropdownStories.Controlled} />

### Ikoner

Du kan lägga till en ikon direkt i `Dropdown.Item`, om det blir för mycket mellanrum till kanten kan du lägga till din egen klass och justera `padding`.

<Canvas of={DropdownStories.Icons} />

### Utan Trigger

`Dropdown` använder popover-API:t, så du kan använda `Dropdown` utan `Dropdown.Trigger`.
Du måste då lägga till `popovertarget={id}` på `Dropdown` och `id` på `Dropdown`.

<Canvas of={DropdownStories.WithoutTrigger} />

## Tillgänglighet

Det finns inbyggd tillgänglighet i `Dropdown.Trigger` med `aria-expanded={true/false}` beroende på om det är öppet eller stängt, och `aria-haspopup='menu'`.

### `Dropdown.List`

<ArgTypes of={Dropdown.List} />

### `Dropdown.Trigger`

Triggen är som standard en [Button](/docs/komponenter-button--docs).

Använd `Dropdown.Trigger` för att aktivera `Dropdown`. Du kan använda `asChild` för att ändra `Dropdown.Trigger`-elementet.
Om du vill lägga till funktioner som `onClick`, lägg dem på ditt element och använd `asChild` på `Dropdown.Trigger`.

### Referenser

Vi använder `ul` och `li` taggar i dropdownen, valet är baserat på dessa:

- https://www.w3.org/WAI/tutorials/menus/flyout/#flyoutnavkbbtn
- https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/../Dropdown.stories.