import { Meta, Canvas, Controls, Primary } from '@storybook/blocks';
import { Do, Dont, Stack, CssVariables } from '@doc-components';
import { Button } from './Button';

import * as ButtonStories from './Button.stories';

import css from '@digdir/designsystemet-css/button.css?inline';

<Meta of={ButtonStories} />

# Button

Knapper lar brukerne utføre handlinger. Vi har variantene `primary`, `secondary` og `tertiary` som kommer i ulike fargevarianter og størrelser.

<Primary />
<Controls />

## Slik bruker du button

```tsx
import { Button } from '@digdir/designsystemet-react';

<Button>Trykk på meg!</Button>;
```

## Varianter av button

Vi har forskjellige knapper for å fremheve utvalgte handlinger. `Primary`, `secondary` og `tertiary` bestemmer hvor viktig handlingen er.

<br />

### Primary button

Vi bruker denne knappen til den handlingen som er viktigst for brukeren, for eksempel Lagre, Neste eller Send inn. Det skal bare være en primærknapp per side.

<Canvas of={ButtonStories.Primary} />

### Secondary button

Vi bruker denne knappen til handlinger som ikke er hovedhandlinger. Den står gjerne sammen med en hovedknapp, så hvis hovedknappen er Lagre, kan sekundærknappen være Avbryt.

<Canvas of={ButtonStories.Secondary} />

### Tertiary button

Denne knappen bruker vi til nedtonede handlinger. Hvis vi vil bruke den alene, må den ha med et ikon, hvis ikke er det vanskelig å se at det er en knapp.

<Canvas of={ButtonStories.Tertiary} />

<br />

## Fargevarianter

### Hovedfarger

Knappene kommer i to hovedfarger `accent` og `neutral`. Hvis du har overstyrt fargepaletten vil fargene `accent`og `neutral` være det du selv har satt.

- `accent`-fargen stikker seg mer ut enn `neutral` og brukes gjerne når handlingen skal ha oppmerksomhet.

<Canvas of={ButtonStories.Accent} />

- `neutral`-fargen er mer nøytral og kan brukes når det er flere knapper på en side som ikke skal ta så mye oppmerksomhet.

<Canvas of={ButtonStories.Neutral} />

### Danger

`Danger`-fargen bruker vi til handlinger som brukeren ikke kan angre, for eksempel Slett.

<Canvas of={ButtonStories.Danger} />

### Kombinere ulike fargevarianter

En gruppe med knapper bør bruke samme fargevariant. Unntaket er når vi skal tydeliggjøre en handling brukeren ikke kan angre, for eksempel Forkast. Vi skal ikke kombinere andre fargevarianter.

<Canvas of={ButtonStories.CombinedColors} />

<br />

## Eksempler

### Knapp som lenke

Bruk `asChild` dersom du trenger å bruke knappen som en lenke. Vurder først om det er bedre å bruke [`Link`](/docs/komponenter-link--docs)-komponenten.
Du kan lese mer om komposisjon [her](https://www.designsystemet.no/grunnleggende/for-utviklere/komposisjon).

<Canvas of={ButtonStories.AsLink} />

### Knapp med kun ikon

Knapper med kun ikon bruker vi bare for godt kjente ikoner som Lukk og Slett. Når knappen bare har ikon, må vi ha med en tilgjengelig tekst som forklarer hva knappen gjør. Dette kan legges i `title`, `aria-label` eller i en `Tooltip` som i eksempelet under.

<Canvas of={ButtonStories.IconOnly} />

### Knapp med tekst og ikon

Når vi bruker ikon sammen med tekst, skal ikonet ha `aria-hidden` slik at teksten ikke blir lest opp av skjermleser to ganger.

<Canvas of={ButtonStories.TextAndIcon} />

Vi plasserer ikonet til venstre eller høyre for teksten, avhengig av hva knappen kommuniserer og hvor den står i grensesnittet.

Som regel er det **venstre** som er den beste plasseringen, men det finnes unntak:

- Er det en knapp som sier “Start” med en høyrepekende pil, er det naturlig at pilen plasseres til høyre for teksten.
- Er knappen fast plassert på høyre side av grensesnittet er det best at ikonet også er høyrestilt for teksten.

<br />

### Størrelse på ikon

Ikon skalerer automatisk basert på knappestørrelse, men du endre denne ved å sette font størrelsen.

<Canvas of={ButtonStories.IconOnly} />

<br />

### Last inn

Når vi skal vise brukeren at knappen laster noe, kan vi kombinere knappen med en `spinner`.

<Canvas of={ButtonStories.Loading} />

I eksempelet over har vi brukt `aria-disabled` til å deaktivere knappene. Dette er den anbefalte måten for å vise at en knapp er deaktivert. Da kan den fortsatt få fokus når noen navigerer med tastaturet. Slik vil blant annet skjermlesere og andre hjelpemidler bli informert om at knappen finnes, men ikke er aktiv.

Denne egenskapen stopper ikke automatisk knappen fra å utløse `onClick`.

Pass på at callback-funksjonen ikke kjører når knappen er deaktivert.

<br />

## Retningslinjer for button

Knapper skal brukes til å utføre handlinger.

Passer til å

- starte en prosess
- navigere i en flyt, for eksempel med Forrige og Neste
- sende inn et skjema

<br />
Passer ikke til å

- navigere til andre sider eller ut av tjenesten, bruk heller [`link`](/docs/komponenter-link--docs)

<br />

### Plassering av knapper

Når vi legger flere knapper ved siden av hverandre, skal primærknappen stå først. Unntaket er Forrige og Neste, da skal sekundærknappen Forrige stå først.

<br />

### Ikke bruk deaktiverte knapper

Deaktiverte knapper bør unngås fordi de kan være vanskelige å oppfatte. Noen brukere vil ikke forstå hva knappen sier eller hvorfor den ikke er klikkbar. Bruk heller en aktiv knapp som validerer. [^1]

<br />
### En knapp skal utføre kun én handling

Vi skal tydelig beskrive handlingene knappene utfører. En knapp kan bare ha en handling, ikke flere.

<Stack direction="row" style={{
  justifyContent: 'unset',
  alignItems: 'unset'
}}>
  <Do
    description='En knapp skal kun gjøre én handling'
    image='/img/component-guidelines/button/button-ex2-do.png'
  />

  <Dont
    description='Unngå flere handlinger på samme knapp'
    image='/img/component-guidelines/button/button-ex2-dont.png'
  />
</Stack>
<br />

### Èn hovedhandling per side

Vi skal holde oss til én primærknapp per side. Hvis det er flere hovedhandlinger kan brukerne bli usikre på hva de skal gjøre.

<Stack direction="row" style={{
  justifyContent: 'unset',
  alignItems: 'unset'
}}>
  <Do
    description='Det skal kun være én primærknapp per side'
    image='/img/component-guidelines/button/button-ex3-do.png'
  />

  <Dont
    description='Vi skal ikke ha flere primærknapper på samme side'
    image='/img/component-guidelines/button/button-ex3-dont.png'
  />
</Stack>
<br />

### Bruk samme farge på knappene i en gruppe

Vi skal holde oss til samme fargevariant for en gruppe knapper.

<Stack direction="row" style={{
  justifyContent: 'unset',
  alignItems: 'unset'
}}>
  <Do
    description='Knappene i en gruppe skal ha samme farge'
    image='/img/component-guidelines/button/button-ex4-do.png'
  />

  <Dont
    description='Ulike farger i en gruppe kan være forvirrende'
    image='/img/component-guidelines/button/button-ex4-dont.png'
  />
</Stack>
<br />

### Ett ikon per knapp

Vi skal holde oss til ett ikon per knapp.

<Stack direction="row" style={{
  justifyContent: 'left',
  alignItems: 'left'
}}>
  <Do
    description='Bruk kun ett ikon'
    image='/img/component-guidelines/button/button-ex1-do.png'
  />

  <Dont
    description='Ikke bruk flere ikoner på samme knapp'
    image='/img/component-guidelines/button/button-ex1-dont.png'
  />
</Stack>
<br />

<br />

## Tekst i komponenten

Knappeteksten skal være kort, helst ikke mer enn to, maks. tre ord. Tenk på at knappen tydelig skal beskrive hva som skjer når brukeren klikker på den.

### Unngå å blande skrivemåter

Bruk stor forbokstav på det første ordet, som du ville gjort i en setning. Ikke bruk bare store bokstaver (all caps), det er vanskeligere å lese.

<Stack direction="row" style={{
  justifyContent: 'left',
  alignItems: 'left'
}}>
  <Do
    description='Bruk stor forbokstav og små bokstaver på resten av ordene'
    image='/img/component-guidelines/button/button-ex5-do.png'
  />

  <Dont
    description='Ikke bland skrivemåter'
    image='/img/component-guidelines/button/button-ex5-dont.png'
  />
</Stack>

## CSS Variabler

<CssVariables css={css} />

<br />
<br />
<br />

[^1]: [Deaktiverte tilstander](https://aksel.nav.no/god-praksis/artikler/deaktiverte-tilstander) - Aksel.
