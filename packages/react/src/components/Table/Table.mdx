import { Meta, Primary, Controls, Canvas, ArgTypes } from '@storybook/blocks';
import { CssVariables } from '@doc-components';
import css from '@digdir/designsystemet-css/table.css?inline';
import * as TableStories from './Table.stories';

import { TableHeaderCell } from './';

<Meta of={TableStories} />

# Table

Table kallas tabell på svenska. Tabeller gör det enklare för användarna att skanna och jämföra information.

<Primary />
<Controls />

## Så använder vi table

```jsx
import { Table } from '@digdir/designsystemet-react';

<Table>
  <Table.Head>
    <Table.Row>
      <Table.HeaderCell>
        Header 1
      </Table.HeaderCell>
      <Table.HeaderCell>
        Header 2
      </Table.HeaderCell>
    </Table.Row>
  </Table.Head>
  <Table.Body>
    <Table.Row>
      <Table.Cell>
        Cell 1
      </Table.Cell>
      <Table.Cell>
        Cell 2
      </Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>
```

## Tabelltexter

Använd [`caption`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/caption) för att beskriva en tabell på samma sätt som vi skulle använda en rubrik.
En tabelltext hjälper användarna att hitta, navigera och förstå tabeller.
Den placeras direkt efter `Table`-taggen.

```jsx
<Table>
  <caption>Här är titeln på tabellen</caption>
  ...
</Table>
```

## Tabellrubriker

Använd tabellrubriker för att tala om för användarna vad innehållet i raderna och kolumnerna är.
Använd [scope-attributet](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/th#scope) för att hjälpa användare av hjälpmedel att skilja mellan rubriker för rader och kolumner.

## Tal i en tabell

När det finns tal i en tabell som ska jämföras, placera talen till höger i tabellcellen.

## Varianter av table

Tabeller kan vara enkla med få rader och kolumner, eller de kan ha mycket innehåll med interaktiva komponenter som länkar, knappar, kryssrutor och rullgardinslistor.

Alla tabeller har rubriker för kolumner och möjlighet att sortera datan i kolumnen. 
Tabellen ska kunna visas i den bredd som innehållet kräver.

### Sticky header

Använd `stickyHeader={true}` för att få en fast rubrik.

<Canvas of={TableStories.StickyHeader} />

### Med formelement

Du kan lägga till formelement i en tabell, men du måste hantera logiken själv.

<Canvas of={TableStories.WithFormElements} />

### Sortering

`TableHeaderCell` har en `sortable` prop som kan användas för att visa att raden är sorterbar.
Använd `sort` prop på `TableHeaderCell` för att indikera i vilken ordning raderna är sorterade.
Använd `onSortClick` prop för att hantera klick på sorterbara rader.

<Canvas of={TableStories.Sortable} />

### Fixed

Du kan lägga till `table-layout: fixed` för att få en tabell som inte ändrar bredden på kolumnerna när innehållet ändras.
Detta hjälper webbläsaren att rita upp tabellen snabbare och är användbart när du har sidnumrering eller andra element som ändrar innehållet i tabellen.

<Canvas of={TableStories.FixedTable} />

## Riktlinjer för när du ska använda table

Vi använder `Table` när vi ska organisera och visa data på ett strukturerat sätt i rader och kolumner för användarna.  
Allt innehåll bör vara vänsterjusterat i tabeller, förutom tal som bör vara högerjusterade för att användarna lätt ska kunna jämföra talen.  
För att spara plats kan vi använda en meny om flera åtgärder i en tabellrad inte behöver vara synliga för användarna hela tiden. 
I rubrikceller använder vi `<Table.HeaderCell>`, inte `<Table.Cell>`. En cell är en rubrik om den beskriver innehållet i cellerna under eller bredvid.

Passar för att
- göra det enkelt för användarna att jämföra och skanna information
- organisera och visa data på ett effektivt sätt i rader och kolumner

Passar inte för att
- skapa layout för innehållet på webbplatsen eller dela upp innehållet på en sida systematiskt
- visa stora mängder data på mobil

## Text i komponenten

Vi använder rubriker för att berätta för användarna vad innehållet i raderna och kolumnerna är.

Innehållet i cellerna ska vanligtvis vara vänsterjusterat.
Undantag som ska vara högerjusterade:
- Tal och valuta
- Knappar

<br />

För att göra tabellraden läsbar på smala skärmar ska innehållet normalt vara toppjusterat.
Men om raden har en eller flera knappar, använder vi centrering.
Rubriker kan med fördel göras `sticky`, vilket innebär att de fortfarande visas även när användaren rullar ned i tabellen.

## Tillgänglighet

Även om olika skärmläsare hanterar tabeller lite olika, har de gemensamt att bara en liten del av tabellen kan presenteras åt gången, ofta bara en cell.
Tabellceller bör inte slås samman, och cellerna bör endast innehålla ett interaktivt element. Då får användarna snabbt översikt över innehållet och kan jämföra och skanna informationen.

Alla tabeller måste ha rubriker för varje kolumn (`<Table.HeaderCell>`). Undantaget är kolumner som bara innehåller interaktiva element, de ska ha rubrik. Se exempel ["Med formelement"](#med-form-elementer).

För att användarna ska kunna navigera i innehållet med skärmläsare måste det finnas rubriker i kolumnerna.
Om det finns behov av att spara plats kan vi visuellt dölja en eller flera rubriker.

Det kan vara svårt att visa tabeller på mobil eftersom det inte finns en gemensam design som fungerar i alla sammanhang.
Ibland är det nödvändigt att jämföra flera kolumner vertikalt för att förstå innehållet, även på mobil.
Andra gånger kan innehållet staplas på höjden på små skärmar utan att det påverkar läsbarheten alltför mycket.
Alternativt kan vi använda ett diagram för att presentera innehåll på mobil om möjligt.

De två vanligaste tabellerna som används på mobil är
- en tabell som rullar horisontellt
- en tabell som omvandlas till en listvy

## Universell utformning

På små skärmar flyttas redigeringsikonen till vänster och tabellen har horisontell rullning vid behov.
- `Table.HeaderCell` ska användas för kolumnrubriker. Kan även användas för radrubriker för att användarna ska kunna navigera mer effektivt i tabellen med skärmläsare. Kom ihåg att använda `scope="row"` och `scope="col"`.
- Tomma celler ska vara `Table.Cell`.
- Kontrollera att du kan välja olika sorteringsalternativ med tangentbordet.
- Testa med skärmläsare att du hör vad som är sorterbart, vilka sorteringsalternativ som finns och att du inte tappar fokus när du ändrar sorteringsordning.
- Tabeller ska alltid ha ett caption-element med en kort text om vad tabellen visar.
Skärmläsare kommer att läsa upp caption-elementet och användarna kan avgöra om de vill läsa vidare i tabellen.

## `TableHeaderCell` Props

<ArgTypes of={TableHeaderCell} />

## CSS Variabler

<CssVariables css={css} />
