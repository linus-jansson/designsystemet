import { Meta, Controls, Primary, Canvas, ArgTypes } from '@storybook/blocks';
import { CssVariables } from '@doc-components';
import css from '@digdir/designsystemet-css/pagination.css?inline';
import * as PaginationStories from './Pagination.stories';
import { usePagination } from './usePagination';

<Meta of={PaginationStories} />

# Pagination

`Pagination` är en lista med knappar som ofta används för att navigera mellan sidor med information.

Komponenten kan användas på olika sätt, se under [användning](/docs/komponenter-pagination--docs#bruk) för mer information.

Observera:

- Knapparna är som standard `button`-element.
- Om en ny sida leder till en ny sida, se till att pagineringsknapparna är `a`-element.
  - Se exempel [Paginering med länkar](/docs/komponenter-pagination--with-anchor).

<Primary />
<Controls of={PaginationStories.Preview} />

## Användning

### Exempel på användning med `Pagination`

`Pagination` är en kontrollerad komponent. Det innebär att komponentens tillstånd om vilken sida som är aktiv styrs externt.

```tsx
import { Pagination } from '@digdir/designsystemet-react';

const onChange = (event, page: number) => console.log(`Går till sida ${page}`);
const [currentPage, setCurrentPage] = useState(4);
const { pages, prevButtonProps, nextButtonProps, hasNext, hasPrevious } = usePagination({
  currentPage,
  setCurrentPage,
  onChange,
  totalPages: 10,
  showPages: 7,
});

<Pagination>
  <Pagination.List>
    <Pagination.Item>
      <Pagination.Button aria-label='Föregående sida' {...prevButtonProps}>
        Föregående
      </Pagination.Button>
    </Pagination.Item>
    {pages.map(({ page, itemKey, buttonProps }) => (
      <Pagination.Item key={itemKey}>
        <Pagination.Button {...buttonProps} aria-label={`Sida ${page}`}>
          {page}
        </Pagination.Button>
      </Pagination.Item>
    ))}
    <Pagination.Item>
      <Pagination.Button aria-label='Nästa sida' {...nextButtonProps}>
        Nästa
      </Pagination.Button>
    </Pagination.Item>
  </Pagination.List>
</Pagination>
```

## Paginering med `usePagination`

Använd `usePagination` för pagineringslogik tillsammans med de enskilda delkomponenterna.
Du kan skicka in:

## Props

<ArgTypes of={PaginationStories.Preview} include={['currentPage', 'totalPages', 'onChange', 'setCurrentPage', 'showPages']} />

<br />
I respons får du objektet:

```ts
{
  hasPrev: boolean, // Indikerar om det finns en föregående sida
  hasNext: boolean, // Indikerar om det finns en nästa sida
  prevButtonProps: PaginationButtonProps, // Egenskaper du kan sprida på föregående-knappen
  nextButtonProps: PaginationButtonProps, // Egenskaper du kan sprida på nästa-knappen
  pages: Array<{
    page: number | string; // Nummer för sidan, eller tom sträng om knappen ska vara ...
    itemKey: string; // key du kan skicka till Pagination.Item för att säkerställa korrekt fokus hantering
    buttonProps: PaginationButtonProps; // Egenskaper du kan sprida på Pagination.Button
  }>
}
```

### Paginering med länkar

Alla delkomponenter stöder `asChild` som kan användas för att ändra `Pagination.Button` till länkar (`a`).

## CSS Variabler

<CssVariables css={css} />
