import { Meta, Primary, Controls, Canvas, ArgTypes } from '@storybook/blocks';

import * as ModalStories from './Modal.stories';

import { Modal } from './';

<Meta of={ModalStories} />

# Modal

`Modal` bruker native `dialog` elementet, du kan enten bruke vår `Trigger` komponent eller `ref` for å åpne modalen.
Dersom du trenger kontroll over når modalen lukkes, må du bruke `ref`.
Les [MDN Docs](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog) for mer info.

`Modal` har native focus trap, som betyr at brukeren ikke kan tabbe til annet innhold på siden.

<Primary />
<Controls />

## Slik bruker du `Modal`

```tsx
<Modal.Context>
  <Modal.Trigger>Open Modal</Modal.Trigger>
  <Modal>
    <Modal.Block>
      <Heading size="xs">Header</Heading>
    </Modal.Block>
    <Modal.Block>Content</Modal.Block>
    <Modal.Block>Footer</Modal.Block>
  </Modal>
</Modal.Context>
```

## Bruk med eksten trigger

Dersom du vil bruke en ekstern trigger, som for eksempel ligger en annen plass i treet, kan du bruke `ref` for å åpne modalen.

```tsx
const modalRef = useRef<HTMLDialogElement>(null);

...

<Button onClick={() => modalRef.current?.showModal()}>Open Modal</Button>
<Modal ref={modalRef} >
  Content
</Modal>
```

### Med bruk av `ref`

<Canvas of={ModalStories.WithoutModalContext} />

### Close on backdrop click

Vi bruker `backdropClose={true}` proppen for å lukke modalen når brukeren klikker utenfor.

<Canvas of={ModalStories.BackdropClose} />

### Med `Block`

Bruk flere `Modal.Block` hvis du vil dele opp modalen med skillelinjer til for eksempel topp- og bunn-område.
Merk at innhold kan ikke plasseres direkte i `Modal` dersom du bruker `Modal.Block`; da burde alt innholdet være inni en av av modalens `Modal.Block`-seksjoner.

<Canvas of={ModalStories.WithHeaderAndFooter} />

### Form

Vi bruker native `autoFocus` på `Textfield` for å fokusere inputen i skjemaet.

<Canvas of={ModalStories.ModalWithForm} />

### Med egendefinert bredde

Bruk `max-width` for å sette egendefinert maks bredde på modalen. Default er 40rem.

<Canvas of={ModalStories.ModalWithMaxWidth} />

### Innhold som går utenfor Modalen

Bruk `overflow: visible` for å la innhold gå utenfor modalen.

<Canvas of={ModalStories.ModalWithCombobox} />

### `Modal.Block`

<ArgTypes of={Modal.Block} />
