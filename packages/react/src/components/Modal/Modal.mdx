import { Meta, Primary, Controls, Canvas, ArgTypes } from '@storybook/blocks';

import * as ModalStories from './Modal.stories';

import { Modal } from './';

<Meta of={ModalStories} />

# Modal

`Modal` använder det inbyggda `dialog`-elementet. Du kan antingen använda vår `Trigger`-komponent eller `ref` för att öppna modalen.
Om du behöver kontroll över när modalen stängs, måste du använda `ref`.
Läs [MDN Docs](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog) för mer information.

`Modal` har inbyggd focus trap, vilket innebär att användaren inte kan tabba till annat innehåll på sidan.

<Primary />
<Controls />

## Så använder du `Modal`

```tsx
<Modal.Context>
  <Modal.Trigger>Öppna Modal</Modal.Trigger>
  <Modal>
    <Modal.Block>
      <Heading size="xs">Header</Heading>
    </Modal.Block>
    <Modal.Block>Content</Modal.Block>
    <Modal.Block>Footer</Modal.Block>
  </Modal>
</Modal.Context>
```

## Användning med extern trigger

Om du vill använda en extern trigger, som exempelvis ligger på en annan plats i trädet, kan du använda `ref` för att öppna modalen.

```tsx
const modalRef = useRef<HTMLDialogElement>(null);

...

<Button onClick={() => modalRef.current?.showModal()}>Öppna Modal</Button>
<Modal ref={modalRef}>
  Content
</Modal>
```

### Med användning av `ref`

<Canvas of={ModalStories.WithoutModalContext} />

### Stäng vid klick på backdrop

Vi använder proppen `backdropClose={true}` för att stänga modalen när användaren klickar utanför.

<Canvas of={ModalStories.BackdropClose} />

### Med `Block`

Använd flera `Modal.Block` om du vill dela upp modalen med skiljelinjer, till exempel för topp- och bottenområde.
Observera att innehåll inte kan placeras direkt i `Modal` om du använder `Modal.Block`; allt innehåll bör vara inom en av modalens `Modal.Block`-sektioner.

<Canvas of={ModalStories.WithHeaderAndFooter} />

### Formulär

Vi använder inbyggt `autoFocus` på `Textfield` för att fokusera input-fältet i formuläret.

<Canvas of={ModalStories.ModalWithForm} />

### Med anpassad bredd

Använd `max-width` för att ställa in anpassad maximal bredd på modalen. Standard är 40rem.

<Canvas of={ModalStories.ModalWithMaxWidth} />

### Innehåll som går utanför modalen

Använd `overflow: visible` för att låta innehåll sträcka sig utanför modalen.

<Canvas of={ModalStories.ModalWithCombobox} />

### `Modal.Block`

<ArgTypes of={Modal.Block} />