import { Meta } from '@storybook/blocks';

import { CodeSnippet } from '@doc-components';

<Meta title='Användning' />

# Användning

På denna sida hittar du information om hur du kan använda designsystemet.
Nedan kan du läsa om:

- [React](#react)
  - [Props](#props)
  - [SSR](#ssr)
  - [Komponenter med `.Root`](#komponenter-med-root)
- [CSS](#css)
  - [Layers](#layers)
  - [Data-attribut](#data-attribut)

## React

### Props

Alla komponenter har props och typer enligt underliggande element. Till exempel godtar `Button` alla props som ett vanligt `button`-element gör.

- Insända props kommer att placeras längst bak på komponenten.
- Insända handler-funktioner (allt som börjar med `on`) kommer att anropas sist om de används internt.
- Insända klassnamn kommer att placeras längst bak i listan av klasser.

#### Exempel

<CodeSnippet language='ts'>
  {`
  <Button data-attr="data" className='my-class' onClick={() => console.log('my click')}>Click me</Button>
`}
</CodeSnippet>

<br />

Blir till:

<CodeSnippet language='ts'>
  {`
  <button 
    className='ds-btn ... my-class' 
    onClick={() => {
      () => {} // vår funktion
      rest.onClick(); // loggningen till konsolen sker här
    }}
    data-attr="data"
  >
    Click me
  </button>
`}
</CodeSnippet>

<br />

### SSR

Alla våra komponenter är klientkomponenter och använder `"use client"`.

Om du vill använda våra komponenter i dina serverkomponenter kan du inte använda dot-notation.
Detta betyder att du inte kan skriva `<Accordion.Item>`, utan måste skriva `<AccordionItem>`. Anledningen är att servern inte kan hantera något som ligger i en klientkomponent, vilket `Accordion` är.

#### I en serverkomponent:

<CodeSnippet language='ts'>
{`
import { Accordion, AccordionHeading, AccordionItem, AccordionContent } från '@digdir/designsystemet-react';

<Accordion>
  <AccordionItem>
    <AccordionHeading>...</AccordionHeading>
    <AccordionContent>...</AccordionContent>
  </AccordionItem>
</Accordion>
`}
</CodeSnippet>

#### I en klientkomponent:

<CodeSnippet language='ts'>
{`
import { Accordion } från '@digdir/designsystemet-react';

<Accordion>
  <Accordion.Item>
    <Accordion.Heading>...</Accordion.Heading>
    <Accordion.Content>...</Accordion.Content>
  </Accordion.Item>
</Accordion>
`}
</CodeSnippet>

### Komponenter med `.Root`

Vissa komponenter har en `.Root`-komponent, som måste wrapas runt barnkomponenterna. Dessa måste användas för att komponenten ska fungera korrekt.
Till exempel har `Accordion` en `Accordion`-komponent som måste wrappa runt `Accordion.Item`-komponenterna för att ge rätt funktionalitet.

<br />
<br />
<br />

## CSS

För att använda designsystemets CSS måste du installera `@digdir/designsystemet-css` och `@digdir/designsystemet-theme`.

### Layers

Vi använder [css layers](https://developer.mozilla.org/en-US/docs/Web/CSS/@layer) för att få så låg specifikhet som möjligt på vår css.
Detta gör att du enkelt kan åsidosätta vår styling med din egen.

Alla våra layers ligger under layer-gruppen `ds`.

Om du till exempel har en css-reset kommer den att åsidosätta delar av det vi har gjort. Vi rekommenderar att du placerar den i en layer och sorterar den först.
Det gör du genom att lägga din reset i en layer och sedan sortera den layern först:

<CodeSnippet language='css'>{`@layer my-reset, ds;`}</CodeSnippet>

### Data-attribut

Vi erbjuder flera data-attribut som kan användas för att ändra temat på komponenterna.

<br />
#### `data-ds-color-mode`

Används för att ändra färgläget på komponenterna. Möjliga värden är `light`, `dark` och `auto`.
Om `auto` är valt kommer färgläget att ändras baserat på användarens preferenser med hjälp av
[prefers-color-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme).

<br />
#### `data-ds-typography`

Används för att ändra typografin på komponenterna. Möjliga värden är `primary` och `secondary`.
Ett vanligt användningsområde för detta attribut är när du vill ha ett monospace-typsnitt i tabeller.

Vilken typografi som är kopplad till `primary` eller `secondary` måste definieras i temat med hjälp av [Tokens Studio](https://tokens.studio/)
(med designsystemets design-tokens) eller [Temabyggaren](https://theme.designsystemet.no/).

Om du ska använda detta attribut måste du komma ihåg att definiera `font-family` så att det använder CSS-variabeln `--ds-font-family`.
Detta kan lösas genom att till exempel använda [attribute selector](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors) i CSS.

<CodeSnippet language='html'>
  {`
  <style>
  [data-ds-typography='secondary'] {
    font-family: var(--ds-font-family), monospace;
  }
  </style>
  <table
    data-ds-typography='secondary'
  >
    …
  </table>
  `}
</CodeSnippet>